---
phase: 01-electron-foundation
plan: 06
type: execute
wave: 3
depends_on: [01-03]
files_modified: [electron/main/menu.ts, electron/main/index.ts]
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Application menu displays with File, Edit, View, and Help menus"
    - "Standard menu commands work (cut, copy, paste, reload, zoom, etc.)"
    - "macOS app menu appears with application name"
    - "Platform differences handled (macOS vs Windows/Linux)"
  artifacts:
    - path: "electron/main/menu.ts"
      provides: "Application menu configuration with standard roles"
      min_lines: 60
      contains: ["Menu.buildFromTemplate", "role:", "process.platform"]
    - path: "electron/main/index.ts"
      provides: "Menu registration in main process"
      contains: ["import.*menu", "setApplicationMenu"]
  key_links:
    - from: "electron/main/index.ts"
      to: "electron/main/menu.ts"
      via: "Import and execute menu module"
      pattern: "import.*['\"]\\.\\/menu|createMenu\\(\\)"
---

<objective>
Create native application menu with File, Edit, View, and Help menus using standard Electron menu roles for cross-platform compatibility using TypeScript.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-electron-foundation/01-ELECTRON-VITE-RESEARCH.md
@.planning/phases/01-electron-foundation/01-03-SUMMARY.md
@electron/main/index.ts
</context>

<tasks>

<task type="auto">
  <name>Create application menu module</name>
  <files>electron/main/menu.ts</files>
  <action>
    Create electron/main/menu.ts with:
    - Import { app, Menu, shell } from 'electron'
    - Detect platform: `const isMac = process.platform === 'darwin'`
    - Build menu template array with:
      1. App menu (macOS only):
         - Label: app.name (or 'Document Research' as fallback)
         - Submenu items:
           * role: 'about'
           * type: 'separator'
           * role: 'hide'
           * role: 'hideOthers'
           * role: 'unhide'
           * type: 'separator'
           * role: 'quit'
      2. File menu:
         - Label: 'File'
         - Submenu:
           * isMac ? role: 'close' : role: 'quit'
      3. Edit menu:
         - Label: 'Edit'
         - Submenu:
           * role: 'undo'
           * role: 'redo'
           * type: 'separator'
           * role: 'cut'
           * role: 'copy'
           * role: 'paste'
           * role: 'selectAll'
      4. View menu:
         - Label: 'View'
         - Submenu:
           * role: 'reload'
           * role: 'forceReload'
           * role: 'toggleDevTools'
           * type: 'separator'
           * role: 'resetZoom'
           * role: 'zoomIn'
           * role: 'zoomOut'
           * type: 'separator'
           * role: 'togglefullscreen'
      5. Help menu:
         - Label: 'Help'
         - Submenu:
           * Click handler: shell.openExternal('https://github.com/yourusername/document-research')
             Label: 'Documentation' or 'Learn More'
           * Click handler: shell.openExternal('https://github.com/yourusername/document-research/issues')
             Label: 'Report Issue'

    - Use Menu.buildFromTemplate(template) to create menu
    - Use Menu.setApplicationMenu(menu) to set menu
    - Export createMenu function for flexibility

    Use TypeScript (.ts file) and ESM imports.
  </action>
  <verify>electron/main/menu.ts exists with menu template and all required menus</verify>
  <done>Application menu module created with standard roles using TypeScript</done>
</task>

<task type="auto">
  <name>Register menu in main process</name>
  <files>electron/main/index.ts</files>
  <action>
    Modify electron/main/index.ts:
    - Import createMenu from './menu.js' (note: .js extension for ESM)
    - After app.whenReady(), call createMenu()
    - Ensure menu is created before windows

    Menu should be available immediately when app launches.
    Use ESM import syntax.
  </action>
  <verify>electron/main/index.ts imports and calls createMenu()</verify>
  <done>Application menu registered at startup</done>
</task>

</tasks>

<verification>
- Menu template includes App (macOS), File, Edit, View, Help menus
- Standard roles used for common operations
- Platform detection for macOS-specific behavior
- Help menu items open external URLs
- Menu registered before window creation
- TypeScript and ESM imports used
</verification>

<success_criteria>
Native application menu provides File, Edit, View, and Help menus with standard cross-platform behavior using TypeScript.
</success_criteria>

<output>
After completion, create `.planning/phases/01-electron-foundation/01-06-SUMMARY.md`
</output>
