---
phase: 01-electron-foundation
plan: 03
type: execute
wave: 2
depends_on: [01-01]
files_modified: [main/menu.js, main/index.js]
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Application menu displays with File, Edit, View, and Help menus"
    - "Standard menu commands work (cut, copy, paste, reload, zoom, etc.)"
    - "macOS app menu appears with application name"
    - "Platform differences handled (macOS vs Windows/Linux)"
  artifacts:
    - path: "main/menu.js"
      provides: "Application menu configuration with standard roles"
      min_lines: 50
      contains: ["Menu.buildFromTemplate", "role:", "process.platform"]
    - path: "main/index.js"
      provides: "Menu registration in main process"
      contains: ["require('./menu')", "setApplicationMenu"]
  key_links:
    - from: "main/index.js"
      to: "main/menu.js"
      via: "Import and execute menu module"
      pattern: "require\\(['\"]\\.\\/menu['\"]\\)"
---

<objective>
Create native application menu with File, Edit, View, and Help menus using standard Electron menu roles for cross-platform compatibility.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-electron-foundation/01-RESEARCH.md
@.planning/phases/01-electron-foundation/01-01-SUMMARY.md
@main/index.js
</context>

<tasks>

<task type="auto">
  <name>Create application menu module</name>
  <files>main/menu.js</files>
  <action>
    Create main/menu.js with:
    - Import { app, Menu, shell } from electron
    - Detect platform: `const isMac = process.platform === 'darwin'`
    - Build menu template array with:
      1. App menu (macOS only):
         - Label: app.name (or 'Document Research' as fallback)
         - Submenu items:
           * role: 'about'
           * type: 'separator'
           * role: 'hide'
           * role: 'hideOthers'
           * role: 'unhide'
           * type: 'separator'
           * role: 'quit'
      2. File menu:
         - Label: 'File'
         - Submenu:
           * isMac ? role: 'close' : role: 'quit'
      3. Edit menu:
         - Label: 'Edit'
         - Submenu:
           * role: 'undo'
           * role: 'redo'
           * type: 'separator'
           * role: 'cut'
           * role: 'copy'
           * role: 'paste'
           * role: 'selectAll'
      4. View menu:
         - Label: 'View'
         - Submenu:
           * role: 'reload'
           * role: 'forceReload'
           * role: 'toggleDevTools'
           * type: 'separator'
           * role: 'resetZoom'
           * role: 'zoomIn'
           * role: 'zoomOut'
           * type: 'separator'
           * role: 'togglefullscreen'
      5. Help menu:
         - Label: 'Help'
         - Submenu:
           * Click handler: shell.openExternal('https://github.com/yourusername/document-research')
             Label: 'Documentation' or 'Learn More'
           * Click handler: shell.openExternal('https://github.com/yourusername/document-research/issues')
             Label: 'Report Issue'

    - Use Menu.buildFromTemplate(template) to create menu
    - Use Menu.setApplicationMenu(menu) to set menu
    - Export createMenu function for flexibility

    Follow RESEARCH.md "Pattern 3: Application Menu with Roles"
  </action>
  <verify>main/menu.js exists with menu template and all required menus</verify>
  <done>Application menu module created with standard roles</done>
</task>

<task type="auto">
  <name>Register menu in main process</name>
  <files>main/index.js</files>
  <action>
    Modify main/index.js:
    - Import createMenu from './menu.js'
    - After app.whenReady(), call createMenu()
    - Ensure menu is created before windows

    Menu should be available immediately when app launches.
  </action>
  <verify>main/index.js imports and calls createMenu()</verify>
  <done>Application menu registered at startup</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Native application menu with File, Edit, View, and Help menus</what-built>
  <how-to-verify>
    1. Launch Electron app: `pnpm electron:dev`
    2. Verify menu bar shows application menus

    **macOS verification:**
    - Menu bar shows app name (Document Research) at left
    - App menu contains: About, Hide, Hide Others, Unhide, Quit
    - File menu contains: Close Window
    - Edit menu contains: Undo, Redo, Cut, Copy, Paste, Select All
    - View menu contains: Reload, Force Reload, Toggle Developer Tools, Reset Zoom, Zoom In, Zoom Out, Toggle Fullscreen
    - Help menu contains: Documentation, Report Issue
    - Test keyboard shortcuts: Cmd+C (copy), Cmd+V (paste), Cmd+Q (quit)

    **Windows/Linux verification:**
    - Menu bar below title bar shows: File, Edit, View, Help
    - File menu contains: Close Window (or Exit on Windows)
    - Edit menu contains: Undo, Redo, Cut, Copy, Paste, Select All
    - View menu contains: Reload, Force Reload, Toggle Developer Tools, Reset Zoom, Zoom In, Zoom Out, Toggle Fullscreen
    - Help menu contains: Documentation, Report Issue
    - Test keyboard shortcuts: Ctrl+C (copy), Ctrl+V (paste), Alt+F4 (quit)

    **Functionality tests:**
    - Select text in Next.js app → Edit → Copy should be enabled
    - View → Toggle Developer Tools should open/close DevTools
    - View → Reload should refresh the page
    - View → Zoom In/Out should scale content
    - Help → Documentation should open browser to GitHub repo

    If menu items are missing or don't work:
    - Check menu template syntax
    - Check role names match Electron docs
    - Check platform detection (isMac)
    - Verify Menu.setApplicationMenu called
  </how-to-verify>
  <resume-signal>Type "approved" if menu works correctly, or describe issues</resume-signal>
</task>

</tasks>

<verification>
- Application menu displays on all platforms
- Standard menu commands work (cut, copy, paste, undo, redo)
- View menu commands work (reload, zoom, DevTools, fullscreen)
- Platform-specific differences handled correctly
- Help menu links open in browser
</verification>

<success_criteria>
Native application menu provides File, Edit, View, and Help menus with standard cross-platform behavior and keyboard shortcuts.
</success_criteria>

<output>
After completion, create `.planning/phases/01-electron-foundation/01-03-SUMMARY.md`
</output>
